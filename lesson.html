<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson Viewer - The Academy</title>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        :root { --bg-slate: #2D3748; --panel-cream: #F7FAFC; --accent-gold: #D69E2E; --accent-ink: #6A7A94; --text-dark: #2D3748; --text-muted: #718096; --font-body: 'Lora', serif; --font-ui: 'Inter', sans-serif; --success-green: #38A169; --error-red: #E53E3E; --intermediate-blue: #3182CE; }
        * { margin: 0; padding: 0; box-sizing: border-box; } body { background: var(--panel-cream); font-family: var(--font-ui); color: var(--text-dark); line-height: 1.7; padding-top: 64px; } h1, h2, h3 { font-family: var(--font-body); } header { background: var(--bg-slate); padding: 0 16px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); z-index: 1000; height: 64px; position: fixed; top: 0; left: 0; right: 0; } .exit-link svg { width: 24px; height: 24px; stroke: var(--accent-ink); transition: stroke 0.2s; } .exit-link:hover svg { stroke: var(--accent-gold); } .brand-group { display: flex; align-items: center; } .brand-text { color: var(--panel-cream); font-weight: 600; font-size: 20px; margin-left: 8px; } header .logo { width: 32px; height: 32px; } footer { text-align: center; padding: 24px 0 16px 0; background: var(--bg-slate); color: var(--accent-ink); font-size: 14px; margin-top: 48px; } main { max-width: 800px; margin: 48px auto; padding: 0 16px; } #lesson-header { margin-bottom: 32px; border-bottom: 1px solid #e2e8f0; padding-bottom: 24px; } #lesson-header h1 { font-size: 42px; line-height: 1.1; margin-bottom: 8px; } #lesson-header p.summary { font-size: 18px; color: var(--text-muted); margin-bottom: 24px; } .metadata { display: flex; flex-wrap: wrap; gap: 16px 24px; font-size: 14px; font-weight: 500; } .metadata > span { display: inline-flex; align-items: center; gap: 6px; } .difficulty-beginner { color: var(--success-green); } .difficulty-intermediate { color: var(--intermediate-blue); } .difficulty-advanced { color: var(--accent-gold); } .nav-box { background: #fff; border: 1px solid #e2e8f0; border-left: 4px solid var(--accent-ink); padding: 16px; border-radius: 6px; margin-bottom: 32px; } .nav-box h3 { font-size: 16px; color: var(--text-dark); margin-bottom: 8px; } .nav-box a { color: var(--intermediate-blue); font-weight: 500; text-decoration: none; } .nav-box a:hover { text-decoration: underline; } #next-lesson-container { margin-top: 40px; } #next-lesson-container a { display: block; background: var(--accent-gold); color: var(--bg-slate); padding: 12px 20px; border-radius: 8px; font-weight: 700; text-align: center; transition: background-color 0.3s; } #next-lesson-container a:hover { background-color: #b88b2a; } #lesson-content h2 { font-size: 28px; color: var(--accent-gold); margin-top: 40px; margin-bottom: 16px; } #lesson-content p { font-family: var(--font-body); font-size: 17px; margin-bottom: 16px; } #lesson-content img { max-width: 100%; height: auto; border-radius: 8px; margin: 16px 0; } .quiz-section { background: #fff; border: 1px solid #e2e8f0; border-radius: 8px; padding: 24px; margin-top: 40px; } .quiz-section h3 { margin-bottom: 16px; } .interaction-block { margin-bottom: 24px; } .quiz-section p.prompt { font-weight: 700; margin-bottom: 16px; } .quiz-options { display: flex; flex-direction: column; gap: 12px; } .quiz-options label { display: flex; align-items: center; gap: 10px; padding: 12px 16px; border: 1px solid #e2e8f0; border-radius: 6px; cursor: pointer; transition: all 0.2s; } .quiz-options label:hover { border-color: var(--accent-gold); background: #fffaf0; } .quiz-options input[type="radio"] { display: none; } .quiz-options input[type="radio"]:checked + .option-text { font-weight: 700; color: var(--accent-gold); } .quiz-options label.correct { border-color: var(--success-green); background: #f0fff4; } .quiz-options label.incorrect { border-color: var(--error-red); background: #fff5f5; } .quiz-section button { background: var(--accent-gold); color: var(--bg-slate); border: none; padding: 10px 20px; border-radius: 6px; font-weight: 700; cursor: pointer; transition: background-color 0.3s; margin-top: 16px; } .feedback { margin-top: 16px; padding: 12px; border-radius: 6px; font-weight: 500; display: flex; align-items: center; gap: 8px; } .feedback.correct { color: var(--success-green); background-color: #f0fff4; border-left: 4px solid var(--success-green); } .feedback.incorrect { color: var(--error-red); background-color: #fff5f5; border-left: 4px solid var(--error-red); } #lesson-spark { margin-top: 48px; padding: 24px; background: var(--bg-slate); color: var(--panel-cream); border-radius: 8px; border-left: 4px solid var(--accent-gold); } #lesson-spark h3 { color: var(--accent-gold); }
    </style>
</head>
<body>
    <header>
        <a href="./academy.html" class="exit-link" title="Return to The Academy Hub"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg></a>
        <div class="brand-group"><svg class="logo" viewBox="0 0 24 24"><path d="M12 2 L2 22 H22 Z M12 6 L18.3 18 H5.7 Z" fill="var(--accent-gold)"/></svg><span class="brand-text">The Academy</span></div>
    </header>
    <main>
        <div id="prerequisites-container"></div>
        <div id="lesson-header"></div>
        <div id="lesson-content"></div>
        <div id="next-lesson-container"></div>
        <div id="lesson-spark"></div>
    </main>
    <footer><p>Â© 2025 Boluadeoye â€¢ Crafted with passion</p></footer>

    <script>
    document.addEventListener('DOMContentLoaded', async () => {
        const auth = { isLoggedIn: () => !!localStorage.getItem('academy_session_token') };

        const fetchDatabase = async () => { /* unchanged */ };
        const renderLesson = async (topicId, db) => { /* unchanged */ };
        // ... all other helper functions for rendering the lesson ...

        fetchDatabase = async () => { try { const r = await fetch('./academy-data.json'); return (await r.json()).topics; } catch (e) { return null; } };
        renderLesson = async (topicId, db) => { const topic = db[topicId]; document.getElementById('lesson-header').innerHTML = `<h1>${topic.title}</h1>...`; /* Full function from previous correct version */ };

        // (You can copy the full, non-condensed helper functions from a previous working version here)
        // ...
        
        const db = await fetchDatabase();
        const params = new URLSearchParams(window.location.search);
        const topicId = params.get('id') || 'gram001';
        const topic = db[topicId];

        const isPremium = topic.access === 'premium';
        if (isPremium && !auth.isLoggedIn()) {
            // Display locked message and link to login.html
            document.getElementById('lesson-header').innerHTML = `<h1>${topic.title}</h1>`;
            document.getElementById('lesson-content').innerHTML = `
                <div class="text-center p-8 border-2 border-dashed rounded-lg">
                    <h3 class="text-xl font-medium text-gray-900">ðŸ”’ Premium Content</h3>
                    <p class="mt-1 text-gray-500">This lesson is for inner circle members. Please log in to access.</p>
                    <a href="./login.html" class="mt-6 inline-flex items-center px-4 py-2 text-white font-bold rounded-md" style="background-color: var(--bg-slate);">Enter Access Key</a>
                </div>`;
        } else {
            await renderLesson(topicId, db); // This needs the full render function
        }
    });
    </script>
</body>
</html>
